import numpy as np
import matplotlib.pyplot as plt

"""
只是一个验证用的py文件
"""
#定义x、y散点坐标
# x = [0.284271247461902,4.30228320103704,7.82945715469326,10.9991987097171,13.8927201313068,16.5638586749397,
#                19.0505047794389,21.3805376641446,23.5751878329105,25.6510717507116,27.6214886532175,29.497282544482,
#                31.2874354311266,32.9994877027668,34.6398435502516,36.2139976952066,37.7267069006199,39.1821218777734,
#                40.5838902367021,41.9352378990735,43.239034243875,44.4978447955524,45.7139742518337,46.8895019345168,
#                48.0263112349928,49.1261142545117,50.1904725653963,51.2208148152996,52.2184517427256,53.18458905482,
#                54.1203385282842,55.0267276243018,55.9047078536121,56.7551620846778,57.5789109535755,58.3767185067828,
#                59.1492971859211,59.8973122455971,60.621385680884]
# x = [0,1.96,3.82,5.48,7.26,8.92,10.34,
# 11.96,13.2,14.4,15.6,16.8,18,19.1,20.3,21.4,22.3,23.44,24.4,25.4,26.44,27.36,28.24,29.34,30.1,30.9,31.7,32.6,33.3,34.14,
# 34.74,35.6,36.4,36.96,37.8,38.42,39.1,39.82,40.48,41.2,41.8,42.36,43.04,43.64,44.1,44.74,45.34,45.94,46.42,46.96,47.5,48,
# 48.6,49.02,49.54,50.1,50.52,51,51.5,51.9,52.44,52.8,53.26,53.7,54.1,54.6,54.96,55.4,55.8,56.22,56.6,56.96,57.32,57.7,58.16
# ]
# x = [0,1.08,1.96,2.8,3.82,4.6,5.48,6.3,7.26,7.84,8.92,9.42,10.34,10.9,11.96,12.3,13.2,13.68,14.4,14.88,15.6,16.2,
# 16.8,17.42,18,18.54,19.1,19.7,20.3,20.7,21.4,21.86,22.3,22.8,23.44,23.86,24.4,25.04,25.4,25.88,26.44,26.7,27.36,
# 27.7,28.24,28.6,29.34,29.5,30.1,30.3,30.9,31.12,31.7,31.96,32.6,32.8,33.3,33.56,34.14,34.3,34.74,35.1,35.6,35.8,
# 36.4,36.52,36.96,37.36,37.8,38.04,38.42,38.7,39.1,39.46,39.82,40,40.48,40.7,41,41.3,41.8,41.9,42.36,42.6,43.04,
# 43.16,43.64,43.7,44.1,44.34,44.74,44.94,45.34,45.6,45.94,46.1,46.42,46.6,46.96,47.26,47.5,47.7,48,48.3,48.6,48.8,
# 49.02,49.3,49.54,49.7,50.1,50.26,50.52,50.76,51,51.2,51.5,51.7,51.9,52.1,52.44,52.6,52.8,53.1,53.26,53.4,53.7,
# 53.9,54.1,54.3,54.6,54.7,54.96,55.2,55.4,55.6,55.8,55.94,56.22,56.4,56.6,56.7,56.96,57.1,57.32,57.5,57.7,57.78,58.16
# ]
y = [
0,0.7,1.08,1.4,1.96,2.4,2.8,3.3,3.82,4.2,4.6,5.1,5.48,5.9,6.3,6.7,7.26,7.5,7.84,8.3,8.92,9.1,9.42,9.8,
10.34,10.6,10.9,11.2,11.82,11.96,12.3,12.64,13.2,13.3,13.68,13.9,14.4,14.6,14.88,15.22,15.6,15.9,
16.2,16.44,16.8,17.06,17.42,17.7,18,18.2,18.54,18.8,19.1,19.36,19.7,20,20.3,20.5,20.7,21,21.4,21.58,
21.86,22.1,22.3,22.62,22.8,23.1,23.44,23.6,23.86,24.16,24.4,24.62,25.04,25.2,25.4,25.6,25.88,26.1,
26.44,26.56,26.7,26.98,27.36,27.5,27.7,27.94,28.24,28.4,28.6,28.8,29.2,29.26,29.5,29.7,30,30.2,
30.3,30.6,30.9,31,31.12,31.4,31.7,31.8,31.96,32.2,32.5,32.7,32.8,33,33.3,33.4,33.56,33.8,34,
34.2,34.3,34.6,34.74,35.04,35.1,35.4,35.6,35.7,35.8,36,36.26,36.4,36.52,36.8,36.96,37.1,37.36,37.5,
37.7,37.86,38.04,38.16,38.42,38.5,38.7,38.9,39.1,39.16,39.46,39.52,39.82,39.9,40,40.26,40.48,40.56,40.7,
40.8,41,41.1,41.3,41.5,41.7,41.9,41.98,42.1,42.36,42.4,42.6,42.7,42.92,43.04,43.24,43.4,43.52,43.6,43.7,
43.92,44.1,44.2,44.34,44.56,44.74,44.84,44.94,45.1,45.34,45.4,45.6,45.7,45.84,45.94,46.1,46.2,46.42,46.5,
46.6,46.8,46.96,47,47.22,47.26,47.5,47.6,47.7,47.8,47.92,48.1,48.2,48.3,48.5,48.6,48.8,48.9,49.02,49.2,
49.3,49.4,49.54,49.6,49.7,49.9,50.02,50.14,50.26,50.4,50.52,50.62,50.76,50.88,51,51.1,51.2,51.32,51.42,
51.54,51.64,51.8,51.9,52,52.1,52.2,52.44,52.5,52.6,52.7,52.8,52.9,53.1,53.2,53.26,53.34,53.5,53.6,53.7,
53.8,53.9,54,54.1,54.3,54.38,54.5,54.6,54.66,54.78,54.9,54.96,55.1,55.2,55.3,55.4,55.5,55.6,55.7,55.8,55.9,55.94,
56.1,56.22,56.3,56.4,56.5,56.6,56.66,56.7,56.8,56.96,57,57.1,57.24,57.32,57.42,57.5,57.6,57.7,57.8,57.9,57.96,58.08

]
y = np.array(y)
print('x is :\n',y)
num = [i for i in np.arange(0,len(y)/8,0.125)]
x = np.array(num)
print('y is :\n',y)
#用7次多项式拟合
f1 = np.polyfit(x, y, 17)
# print('f1 is :\n',f1)
p1 = np.poly1d(f1)
# print('p1 is :\n',p1)
yvals = p1(x)
plot1 = plt.plot(x, y, 'r',label='original values')
plot2 = plt.plot(x, yvals, 'g',label='polyfit values')
plt.xlabel('x-circle')
plt.ylabel('y-height')
plt.legend(loc=4) #指定legend的位置右下角
plt.title('polyfitting')
plt.show()

w = 15 # 高度15
print("w={}, value={}".format(w,(p1-w).roots))

top_3_index = (abs(y-yvals)).argsort()[::-1][0:3]
top_3_y_values = [y[i] for i in top_3_index]
print('差值最大前三索引{},值{}'.format(top_3_index,top_3_y_values))
print('差值最大的是{}，插值最大的索引{},y值是{}'.format(np.max(abs(y-yvals)),np.argmax(abs(y-yvals)),y[np.argmax(abs(y-yvals))]))
# print('y-yvals',y-yvals)
# y_fit = []
# for i in x:
#     y_fit.append(p1(i))
# res = list(zip(y_fit,y))
# print(res)
